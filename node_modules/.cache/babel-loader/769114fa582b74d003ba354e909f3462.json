{"ast":null,"code":"import _classCallCheck from\"/home/jho2301/wooteco/lv2/lotto/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jho2301/wooteco/lv2/lotto/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jho2301/wooteco/lv2/lotto/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jho2301/wooteco/lv2/lotto/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jho2301/wooteco/lv2/lotto/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import PaymentForm from'./components/PaymentForm/PaymentForm';import TicketList from'./components/TicketList/TicketList';import ResultModal from'./components/ResultModal/ResultModal';import WinningNumberForm from'./components/WinningNumberForm/WinningNumberForm';import{AppWrapper}from'./App.styles';import{issueTickets}from'./services/tickets';import ALERT_MESSAGE from'./constants/alertMessage';import{getRemainedTime}from'./utils/date';import{GREENWICH_MILLISECONDS}from'./services/game';import RemainedTime from'./components/RemainedTime/RemainedTime';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.winningNumberFormRef=void 0;_this.remainTimer=void 0;_this.winningNumberFormRef=/*#__PURE__*/React.createRef();_this.remainTimer=null;_this.state={tickets:[],winningNumber:{numbers:[],bonus:0},isModalOpen:false,remainTime:null};_this.handlePayment=_this.handlePayment.bind(_assertThisInitialized(_this));_this.handleWinningNumber=_this.handleWinningNumber.bind(_assertThisInitialized(_this));_this.handleModal=_this.handleModal.bind(_assertThisInitialized(_this));_this.handleRemainedTime=_this.handleRemainedTime.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"handleRemainedTime\",value:function handleRemainedTime(){this.setState({remainTime:new Date(getRemainedTime()-GREENWICH_MILLISECONDS)});}},{key:\"handlePayment\",value:function handlePayment(payment){var _this2=this;var tickets=issueTickets(payment);this.setState({tickets:tickets});this.handleRemainedTime();this.remainTimer=setInterval(function(){_this2.handleRemainedTime();},1000);}},{key:\"handleWinningNumber\",value:function handleWinningNumber(winningNumber){var ticketCount=this.state.tickets.length;if(ticketCount===0){alert(ALERT_MESSAGE.SHOULD_BUY_TICKET);return;}this.setState({winningNumber:winningNumber});this.handleModal(true);}},{key:\"handleModal\",value:function handleModal(isOpen){this.setState({isModalOpen:isOpen});}},{key:\"resetGame\",value:function resetGame(){var _this$winningNumberFo;this.setState({tickets:[],winningNumber:{numbers:[],bonus:0},isModalOpen:false,remainTime:null});(_this$winningNumberFo=this.winningNumberFormRef.current)===null||_this$winningNumberFo===void 0?void 0:_this$winningNumberFo.reset();this.remainTimer&&clearInterval(this.remainTimer);}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(AppWrapper,{display:\"flex\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"app-title\",children:\"\\uD83C\\uDFB1 \\uD589\\uC6B4\\uC758 \\uB85C\\uB610\"}),/*#__PURE__*/_jsx(PaymentForm,{handlePayment:this.handlePayment}),this.state.remainTime&&/*#__PURE__*/_jsx(RemainedTime,{remainTime:this.state.remainTime}),/*#__PURE__*/_jsx(TicketList,{tickets:this.state.tickets}),/*#__PURE__*/_jsx(WinningNumberForm,{handleWinningNumber:this.handleWinningNumber,formRef:this.winningNumberFormRef}),this.state.isModalOpen&&/*#__PURE__*/_jsx(ResultModal,{handleModalClose:function handleModalClose(){return _this3.handleModal(false);},resetGame:function resetGame(){return _this3.resetGame();},tickets:this.state.tickets,winningNumber:this.state.winningNumber})]});}}]);return App;}(Component);export{App as default};","map":{"version":3,"sources":["/home/jho2301/wooteco/lv2/lotto/src/App.tsx"],"names":["React","Component","PaymentForm","TicketList","ResultModal","WinningNumberForm","AppWrapper","issueTickets","ALERT_MESSAGE","getRemainedTime","GREENWICH_MILLISECONDS","RemainedTime","App","props","winningNumberFormRef","remainTimer","createRef","state","tickets","winningNumber","numbers","bonus","isModalOpen","remainTime","handlePayment","bind","handleWinningNumber","handleModal","handleRemainedTime","setState","Date","payment","setInterval","ticketCount","length","alert","SHOULD_BUY_TICKET","isOpen","current","reset","clearInterval","resetGame"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PaymentForm from './components/PaymentForm/PaymentForm';\nimport TicketList from './components/TicketList/TicketList';\nimport ResultModal from './components/ResultModal/ResultModal';\nimport WinningNumberForm from './components/WinningNumberForm/WinningNumberForm';\nimport { AppWrapper } from './App.styles';\nimport { issueTickets } from './services/tickets';\nimport ALERT_MESSAGE from './constants/alertMessage';\nimport { getRemainedTime } from './utils/date';\nimport { GREENWICH_MILLISECONDS } from './services/game';\nimport RemainedTime from './components/RemainedTime/RemainedTime';\n\ntype State = {\n  tickets: Ticket[];\n  winningNumber: WinningNumber;\n  isModalOpen: boolean;\n  remainTime: Date | null;\n};\n\nexport default class App extends Component<{}, State> {\n  winningNumberFormRef: React.RefObject<HTMLFormElement>;\n  remainTimer: NodeJS.Timeout | null;\n\n  constructor(props: {}) {\n    super(props);\n    this.winningNumberFormRef = React.createRef();\n    this.remainTimer = null;\n\n    this.state = {\n      tickets: [],\n      winningNumber: {\n        numbers: [],\n        bonus: 0,\n      },\n      isModalOpen: false,\n      remainTime: null,\n    };\n\n    this.handlePayment = this.handlePayment.bind(this);\n    this.handleWinningNumber = this.handleWinningNumber.bind(this);\n    this.handleModal = this.handleModal.bind(this);\n    this.handleRemainedTime = this.handleRemainedTime.bind(this);\n  }\n\n  handleRemainedTime() {\n    this.setState({\n      remainTime: new Date(getRemainedTime() - GREENWICH_MILLISECONDS),\n    });\n  }\n\n  handlePayment(payment: number) {\n    const tickets: Ticket[] = issueTickets(payment);\n    this.setState({\n      tickets,\n    });\n\n    this.handleRemainedTime();\n    this.remainTimer = setInterval(() => {\n      this.handleRemainedTime();\n    }, 1000);\n  }\n\n  handleWinningNumber(winningNumber: WinningNumber) {\n    const ticketCount = this.state.tickets.length;\n\n    if (ticketCount === 0) {\n      alert(ALERT_MESSAGE.SHOULD_BUY_TICKET);\n      return;\n    }\n\n    this.setState({\n      winningNumber,\n    });\n\n    this.handleModal(true);\n  }\n\n  handleModal(isOpen: boolean) {\n    this.setState({\n      isModalOpen: isOpen,\n    });\n  }\n\n  resetGame() {\n    this.setState({\n      tickets: [],\n      winningNumber: {\n        numbers: [],\n        bonus: 0,\n      },\n      isModalOpen: false,\n      remainTime: null,\n    });\n\n    this.winningNumberFormRef.current?.reset();\n    this.remainTimer && clearInterval(this.remainTimer);\n  }\n\n  render() {\n    return (\n      <AppWrapper display=\"flex\">\n        <h1 className=\"app-title\">🎱 행운의 로또</h1>\n        <PaymentForm handlePayment={this.handlePayment} />\n        {this.state.remainTime && <RemainedTime remainTime={this.state.remainTime} />}\n        <TicketList tickets={this.state.tickets} />\n        <WinningNumberForm\n          handleWinningNumber={this.handleWinningNumber}\n          formRef={this.winningNumberFormRef}\n        />\n\n        {this.state.isModalOpen && (\n          <ResultModal\n            handleModalClose={() => this.handleModal(false)}\n            resetGame={() => this.resetGame()}\n            tickets={this.state.tickets}\n            winningNumber={this.state.winningNumber}\n          />\n        )}\n      </AppWrapper>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}